# TheMevTerminator
The Mev Terminator,make ethereum great again

## 项目介绍

TheMevTerminator 是一个旨在通过重排交易顺序来缓解MEV（最大可提取价值）带来的损害，以及通过对套利机会的重拍卖来使得用户的资金效率得到更多的回报的dex。
## 项目特点

- 优化交易顺序：通过分析和重排交易，减少交易之间的冲突，从而降低交易成本和提高交易速度。
- 减少 MEV：通过减少交易之间的冲突，使用随机数来重排交易，减少和避免 MEV 的产生，从而提高网络效率，并保护用户资产。
- 提高资金效率：通过将套利机会公开拍卖和提交，重新分配套利利润来补贴lp用户，使得用户的lp资金得到更多的回报，资金利用率大大提升。
- 提高交易速度：通过减少交易之间的冲突，提高交易速度，从而提高网络效率，节省用户的gas的同时有更高的安全性。

## 项目结构

TheMevTerminator 项目主要由以下几个部分组成：
- dex部分：一个去中心化的交易所，包含路由，工厂以及pool部分，用户可以在这个交易所上进行交易或者是提供流动性来赚取费用。
- 链上执行器部分：执行器是整个交易所的核心，负责使用随机数重排和结算所有的swap交易，并拍卖产生的套利交易，以及对套利利润的再分配。
- 链下机器人部分：负责收集链上的交易数据，并将其发送给链上执行器以触发swap交易的结算，链下机器人部分也会附带可能的套利机会并在结算的同时执行套利以获取利润。

#### 项目机制

首先我们项目采用传统的dex（uniswap v2，v3）作为基础。但是由于传统的dex无法避免mev的产生，常常为用户和项目方带来不可挽回的损失，除此之外，传统dex的自由套利机制，也使得lp没有真正获得属于他们的利润分配，常常使得lp利润过于低下。基于此，我们设计了以下机制来解决这几个问题。

1. 使用随机数重排交易顺序
    我们的交易执行流比较特殊。当用户发起一笔交易并成功打包上链时，此时这笔交易仅仅是在路由中被记录，但是并没有在pool上进行交换与执行。这是因为，如果按照交易入块的顺序来执行，那么dex就会不可避免的导致mev问题，使得用户资产处于风险之中。
    因此，我们以每个块作为一个结算单位。每当一个包含使用我们dex的交易的新区块产生，我们会在紧接着这个块的后面一个块，发起结算交易，将这个块中所有成功登记到我们路由中的交易结算。这个结算交易的逻辑为使用一个无法预测或者是预测难度很大的随机序列来将这些登记的交易进行重新排列，依次结算，这样也就没有人可以提前知道交易的结算顺序，从而对用户发起mev攻击。当mev试图通过交易顺序来获取利润的方式失效，因为他们无法保证自己能成功在用户之前买入，并在用户之后卖出。显然，这个机制需要不断的监控新块的产生使得我们能够即使的结算用户的交易，并且由于结算需要的操作更多，所以产生的gas费用也就会更多，光有这样的机制虽然成功防止了mev的损害，但是却导致了结算层需要更多的花费，由谁来付出这个花费很显然是很难去找到的。于是，我们设计了第二个更巧妙的机制来解决了这个问题。

2. 套利机会激励机制
    我们都知道，mev除了抢跑给用户带来危害以外，还有一个特点就是后跑套利，这会使得各个pool之间的价差得到抹平，这样对市场来说，是一个有益的行为。对于每一次dex上的swap交易，都会产生价格差异，从而产生套利机会。由于我们的dex设计为无法在一个区块中就完成结算，自然也会在结算之后产生的价格差异无法得到有效利用。于是，我们将这个可以套利的机会给予结算者，当结算者调用结算函数时，我们允许其传入套利参数（套利路径以及数量）来在结算所有的交易之后立即在我们的pair上以及其他dex的pair上执行价格差异导致的套利操作。由于结算者是拥有出现价格差异后最先有能力执行套利的人，所以一定会拿到这个属于他的激励。因此，这样也刚好解决了结算者积极性不足的问题，哪些运行我们机器人的套利者，都会自愿为用户付出gas和帮助结算用户的交易，因为这样他们同时会得到属于他们的套利利润。除此之外，由于我们的执行路由是套利的执行者合约，有权决定套利利润的分配，于是，我们可以通过dao治理的方式，决定套利利润的分配比例，将套利的利润一部分所得给予补贴lp，激励哪些提供流动性的用户。一部分项目方，最后剩余的给套利者。这个个合理的利润分配制度会使得四方都受益。用户受益，因为使用我们的dex，不用再担心mev会给自己带来损失。项目方受益，因为收到了手续费，会更加努力的建设项目。lp的利润更多，apy也会比传统的dex更高，能够激励lp提供者长久的提供流动性。套利者也受益，因为帮助用户结算可以稳稳的赚取套利利润而不用担心风险。

这两个机制的结合，使得用户，项目方，lp，套利者四方都受益，从而形成一个良性的生态循环。




